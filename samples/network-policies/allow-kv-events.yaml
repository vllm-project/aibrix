---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-kv-events
  # Note: This sample uses 'default' namespace for quickstart purposes.
  # To deploy to a different namespace, change this value or use: kubectl apply -f <file> -n <your-namespace>
  namespace: default
spec:
  podSelector:
    matchLabels:
      app: gateway-plugins
  policyTypes:
    - Ingress
  ingress:
    - from:
        - podSelector:
            matchLabels:
              model.aibrix.ai/kv-events-enabled: "true"
      ports:
        - protocol: TCP
          port: 5557
        - protocol: TCP
          port: 5558
