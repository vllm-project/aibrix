apiVersion: v1
kind: Pod
metadata:
  name: benchmark-client
spec:
  restartPolicy: Never
  containers:
    - name: vllm
      image: kvcache-container-image-hb2-cn-beijing.cr.volces.com/aibrix/vllm-openai:v0.9.2-cu128-nixl-v0.4.1-lmcache-0.3.1.post1
      command: ["sleep", "infinity"]
      resources:
        limits:
          cpu: "1"
        requests:
          cpu: "1"
      volumeMounts:
        - name: model-vol
          mountPath: /models
  volumes:
    - name: model-vol
      hostPath:
        path: /data01/models
        type: Directory

# 1. copy code from
# https://github.com/happyandslow/vllm/commit/a2223d8d3fd288a0fe0a0d0246c185e220658001
# https://github.com/happyandslow/vllm/commit/3736ae444c63dcf3e27df1a54a12f5b19d3f3944
# https://github.com/happyandslow/vllm/commit/0fc4edf3740dab9582bfd028c9913dbc1b25e0b0
# 2. install dependencies
# pip3 install datasets pandas
# 2. run commands
# ./run.sh qwen3-8b 8000 "qwen3-8b" "/models/Qwen3-8B" /models/benchmark/qwen3-8b-sglang-non-disagg.log